function nShell(e,t,n){n=n||"&gt;";var l=t,o=n,p=l+o,a=document.getElementById(e);a.className+=" nShell";var s,r=!0,m=[],c=0,u=!0,g=!1,y={};a.innerHTML="",self=this,nShell.prototype.post=function(e){var t=document.createElement("br");a.appendChild(t);var n=document.createElement("span");n.innerHTML=e,a.appendChild(n)},nShell.prototype.setOptions=function(t){for(var n in t)if("case-sensitive"==n||"caseSensitive"==n)r=t[n];else if("font-size"==n||"fontSize"==n)a.style.fontSize=t[n];else if("font-family"==n||"fontFamily"==n)a.style.fontFamily=t[n];else if("color"==n)a.style.color=t[n];else{if("background-color"!=n&&"backgroundColor"!=n)throw"[nShell] #"+e+": Invalid Option '"+n+"'.";a.style.backgroundColor=t[n]}},nShell.prototype.caseSensitive=function(e){r=e},nShell.prototype.fontSize=function(e){a.style.fontSize=e},nShell.prototype.fontFamily=function(e){a.style.fontFamily=e},nShell.prototype.color=function(e){a.style.color=e},nShell.prototype.backgroundColor=function(e){a.style.backgroundColor=e},nShell.prototype.setCommand=function(){var t=Array.prototype.slice.call(arguments);if(1==t.length&&"object"==typeof t[0]){t=t[0];for(var n in t)y[n]=t[n]}else if(2==t.length&&"string"==typeof t[0])y[t[0]]=t[1];else{if(1!=t.length||"function"!=typeof t[0])throw"[nShell] #"+e+": Invalid command definition.";s=t[0]}},nShell.prototype.proc=function(e){if(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),inp=e,r||(inp=e.toLowerCase()),y[inp]){for(var t in y)if(inp==t)if("function"==typeof y[t]){var n=y[t]()||"";nShell.prototype.post(n)}else nShell.prototype.post(y[t])}else s?s(inp):nShell.prototype.post(e+": Command not found.")},nShell.prototype["throw"]=function(){var t=Array.prototype.slice.call(arguments);if(1==t.length)nShell.prototype.post(t+": Command not found.");else{if(2!=t.length)throw"[nShell] #"+e+": Invalid throw() error.";t[0]?nShell.prototype.post(t[0]+": "+t[1]):nShell.prototype.post(t[1])}},nShell.prototype.shprompt=function(){var e=document.createElement("br");a.getElementsByClassName("shprompt")[0]&&a.appendChild(e);var t=document.createElement("span");t.setAttribute("class","shprompt"),a.appendChild(t);var n=document.createElement("input");for(n.setAttribute("type","text"),n.setAttribute("autofocus","autofocus"),n.setAttribute("class","shpromptinp"),n.setAttribute("maxlength","64"),a.appendChild(n),i=0;i<a.getElementsByClassName("shprompt").length;i++)a.getElementsByClassName("shprompt")[i].innerHTML="<b>"+p+"</b>&nbsp;";a.getElementsByClassName("shpromptinp")[0].focus(),a.getElementsByClassName("shpromptinp")[0].select()},a.addEventListener("keypress",function(e){var t=e.which||e.keyCode;if(13===t){a.getElementsByTagName("input")[0].value.replace(/ /g,"")&&nShell.prototype.proc(document.getElementsByTagName("input")[document.getElementsByTagName("input").length-1].value),m.unshift(a.getElementsByTagName("input")[0].value);var n=a.getElementsByTagName("input")[a.getElementsByTagName("input").length-1],l=n.parentNode;$(a.getElementsByTagName("input")[a.getElementsByTagName("input").length-1]).replaceWith('<div class="input">'+a.getElementsByTagName("input")[a.getElementsByTagName("input").length-1].value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")+"</div>"),console.log(l),nShell.prototype.shprompt(),a.getElementsByTagName("input")[document.getElementsByTagName("input").length-1].innerHTML="",c=0,u=!0}}),a.addEventListener("keydown",function(e){var t=e.which||e.keyCode;38===t?(1==u&&(m.unshift(a.getElementsByTagName("input")[a.getElementsByTagName("input").length-1].value),u=!1),""==m[0]&&(g=!0),m=m.filter(function(e){return!!e}),g&&(m.unshift(""),g=!1),void 0!==m[c+1]&&(c+=1),a.getElementsByTagName("input")[0].value=m[c]):40===t&&(void 0!==m[c-1]&&(c-=1),a.getElementsByTagName("input")[0].value=m[c])}),a.addEventListener("click",function(){a.getElementsByClassName("shpromptinp")[0].focus(),a.getElementsByClassName("shpromptinp")[0].select()}),nShell.prototype.shprompt()}